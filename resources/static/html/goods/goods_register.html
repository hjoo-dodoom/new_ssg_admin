<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=1400"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>신세계 관리자</title>
    <!-- CSS files -->
    <link href="/resources/static/dist/css/tabler.css" rel="stylesheet"/>
    <link href="/resources/static/dist/css/tabler-vendors.css" rel="stylesheet"/>
    <link href="/resources/static/dist/css/style.css" rel="stylesheet"/>
    <!-- <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2/dist/spectrum.min.css"/> -->
    <link rel="shortcut icon" href="/resources/static/dist/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/resources/static/dist/favicon.ico" type="image/x-icon">
    <script src="/resources/static/dist/js/jquery-3.6.0.min.js"></script>
    <script src="/resources/static/dist/js/jquery-ui.js"></script>
    <script src="/resources/static/dist/libs/litepicker/dist/litepicker.js?1674944402"></script>
    <script src="/resources/static/dist/js/jquery.validate.js"></script>
    <!-- Tabler Core -->
    <script src="/resources/static/dist/js/ckeditor/ckeditor.js"></script>
    <script src="/resources/static/dist/js/common.js"></script>
    <style>
    :root {
        --theme-admin-type: #cf3f42;
        /* #cf3f42 통합관리자 컬러 코드*/
        /* #4b9b52 협력회사 컬러 코드 */
        /* #214c9c 고객사 컬러 코드 */
    }
    </style>
</head>
<body>
<aside id="header" class="navbar navbar-vertical navbar-expand-lg header_left"></aside>
<script>
    //html include
    function includeFile(path, targetId) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', path, true);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            document.getElementById(targetId).innerHTML = xhr.responseText;
        }
    };
    xhr.send();
    }
    var includePath = "/resources/static/layout/header.html";
    includeFile(includePath, 'header');
</script>

<div class="page-wrapper">
    <!-- 공통영역2 -->
    <div class="member_info">
        <div class="info">
            <span>관리권한 : 최상위관리자</span>
            <!-- 통합관리자 - 관리권한 : 최상위관리, MD관리자, 영업담당자, 아르바이트, 시스템관리 -->
            <!-- 협력관리자 - 관리권한 : 최상위관리, MD관리자, 영업담당자, 아르바이트, 시스템관리 -->
            <!-- 고객사관리자 - 관리권한 : 최상위관리, MD관리자, 영업담당자, 아르바이트, 시스템관리 -->
            <span class="login_session">로그인 유지시간 <strong>30:00</strong> <button type="button" class="btn btn-xs btn-primary">연장</button></span>
            <button type="button" class="btn btn-xs btn-secondary">관리자 매뉴얼 보기</button><!-- 공통 -->
            <button type="button" class="btn btn-xs btn-secondary">기본양식다운로드</button><!-- 통합,협력사만 -->
            <button type="button" class="btn btn-xs btn-secondary" onclick="windowPopup('/resources/static/html/popup/admin_modify_pop.html', '900', '640')">관리자정보수정</button><!-- 공통 -->
            <button type="button" class="btn btn-xs btn-secondary">보안체크</button><!-- 협력사만 -->
            <button type="button" class="btn btn-xs btn-secondary" onclick="windowPopup('/resources/static/html/popup/terms_pop.html', '600', '540')">이용약관</button><!-- 협력사만 -->
        </div>
        <div>
            <a href="javascript:;" class="logout">홍길동(admin_01)님 로그아웃</a>
            <a href="javascript:;" class="home">홈으로</a>
        </div>
    </div>

    <!-- 페이지 히스토리 탭 -->
    <div class="page-history">
        <div class="history_toggle">
            <label class="form-check form-switch">
                <span class="form-check-label">History</span>
                <input id="historyUse" class="form-check-input" type="checkbox" >
            </label>
        </div>
        <button class="close_all" type="button" title="히스토리 모두 삭제" onclick="historyRemoveAll();">히스토리 모두 삭제</button>
    </div>
    <!-- //공통영역2 -->

    <div class="page-header d-print-none">
        <div class="container-xl">
            <div class="row g-2 align-items-center">
                <div class="col">
                    <!-- Page pre-title -->
                    <div class="page-pretitle">
                        홈 > 상품 > 상품목록 > 상품등록
                    </div>
                    <h2 class="page-title">
                        상품등록
                    </h2>
                </div>
            </div>
        </div>
    </div>
    <script>
    </script>
    <!-- Page body -->
    <div class="page-body">
        <div class="container-xl form-container grid_grid4">

            <div class="list-btns justify-content-between align-items-center mb-3">
                <div>
                    <div class="display_type mb-0">
                        <button type="button" class="grid4 active" title="폼 그리드 1x4">폼 그리드 1x4</button>
                        <button type="button" class="grid3 " title="폼 그리드 1x3">폼 그리드 1x3</button>
                        <button type="button" class="grid2" title="폼 그리드 1x2">폼 그리드 1x2</button>
                    </div>
                </div>
                <div>
                    <div class="input-group d-inline-flex w-auto me-2">
                        <span class="input-group-text text">상품등록 매뉴얼 다운로드</span>
                        <a href="javascript:;" class="btn bg-secondary text-light btn-sm">매뉴얼 다운로드</a>
                    </div>

                    <div class="input-group d-inline">
                        <button 
                            type="button" 
                            class="btn btn-outline-primary"
                            onclick="windowPopup('/resources/static/html/popup/temporary_save_pop.html', '500', '550')"
                        >임시저장</button><button 
                            type="button" 
                            class="btn btn-outline-primary"
                            onclick="windowPopup('/resources/static/html/popup/temporary_save_pop.html', '500', '550')"
                        >10</button>
                    </div>

                    <button type="submit" class="btn btn-primary">등록</button>
                    <a href="/resources/static/html/goods/goods_list.html" class="btn btn-secondary">목록</a>
                </div>
            </div>

            <div class="fixed_taps row">
                <div class="col">
                    <a href="#section1"
                        class="btn bg-primary text-light w-100">
                        대표이미지
                    </a>
                </div>
                <div class="col">
                    <a href="#section2"
                        class="btn bg-secondary text-light w-100">
                        카테고리/정보고시
                    </a>
                </div>
                <div class="col">
                    <a href="#section3"
                        class="btn bg-secondary text-light w-100">
                        상품정보
                    </a>
                </div>
                <div class="col">
                    <a href="#section4"
                        class="btn bg-secondary text-light w-100">
                        가격정보
                    </a>
                </div>
                <div class="col">
                    <a href="#section5"
                        class="btn bg-secondary text-light w-100">
                        재고관리옵션
                    </a>
                </div>
                <div class="col">
                    <a href="#section6"
                        class="btn bg-secondary text-light w-100">
                        상품소개
                    </a>
                </div>
            </div>
            
            <div class="row">
                <div id="section1"  class="col-12">
                    <div class="card form_area">
                        <div class="card-body">
                            <div class="row">
                                <div class="form_item size_lg">
                                    <div class="subheader mb-1">상품메모 (*협력회사는 노출안됨)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <textarea name="" id="" class="form-control" placeholder="상품에 대한 기타정보를 메모합니다. 협력회사에는 노출이 안됩니다."></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section1"  class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">대표 이미지</h3></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form_item size_lg">
                                    <div class="subheader mb-1">이미지</div>
                                    <div class="subcontent">
                                        <smll class="form-hint">
                                        ※ <span class="text-primary">대표 이미지는 최대 5개까지 등록</span>할 수 있으며, 
                                        <span class="text-primary">첫번째 대표 이미지(빨간색테두리)는 필수</span> 입니다.
                                        대표 이미지 사이즈는 500*500, 이미지 용량은 2MB이하, 
                                        확장자는 JPG, JPEG만 정상 등록됩니다.
                                        </smll>
                                        <div class="photo_uploads row">
                                            <div class="photo_item col">
                                                <smll class="form-hint text-center fw-bold bg-secondary-lt">대표 이미지 <span class="badge_required">필수</span></smll>
                                                <label class="photo_area">
                                                    <input type="file" id="photoImage1" accept="image/*">
                                                    <span class="thum"></span>
                                                </label>
                                                <!-- 이미지 허버 했을 때 크케 보기 코드 -->
                                                <!-- 하단 테그 동적으로 추가 -->
                                                <!-- <div class="thum_hover">
                                                    <img src="/resources/static/dist/img/img2.jpg" alt="">
                                                </div> -->
                                                <div class="row">
                                                    <label for="photoImage1" class="col btn btn-xs btn-secondary">변경</label>
                                                    <button type="button" class="col btn btn-xs btn-warning">삭제</button>
                                                </div>
                                            </div>
                                            <div class="photo_item col">
                                                <smll class="form-hint text-center fw-bold bg-secondary-lt">이미지1</smll>
                                                <label class="photo_area">
                                                    <input type="file" id="photoImage2" accept="image/*">
                                                    <span class="thum"></span>
                                                </label>
                                                <div class="row">
                                                    <label for="photoImage2" class="col btn btn-xs btn-secondary">변경</label>
                                                    <button type="button" class="col btn btn-xs btn-warning">삭제</button>
                                                </div>
                                            </div>
                                            <div class="photo_item col">
                                                <smll class="form-hint text-center fw-bold bg-secondary-lt">이미지2</smll>
                                                <label class="photo_area">
                                                    <input type="file" id="photoImage3" accept="image/*">
                                                    <span class="thum"></span>
                                                </label>
                                                <div class="row">
                                                    <label for="photoImage3" class="col btn btn-xs btn-secondary">변경</label>
                                                    <button type="button" class="col btn btn-xs btn-warning">삭제</button>
                                                </div>
                                            </div>
                                            <div class="photo_item col">
                                                <smll class="form-hint text-center fw-bold bg-secondary-lt">이미지3</smll>
                                                <label class="photo_area">
                                                    <input type="file" id="photoImage4" accept="image/*">
                                                    <span class="thum"></span>
                                                </label>
                                                <div class="row">
                                                    <label for="photoImage4" class="col btn btn-xs btn-secondary">변경</label>
                                                    <button type="button" class="col btn btn-xs btn-warning">삭제</button>
                                                </div>
                                            </div>
                                            <div class="photo_item col">
                                                <smll class="form-hint text-center fw-bold bg-secondary-lt">이미지4</smll>
                                                <label class="photo_area">
                                                    <input type="file" id="photoImage5" accept="image/*">
                                                    <span class="thum"></span>
                                                </label>
                                                <div class="row">
                                                    <label for="photoImage5" class="col btn btn-xs btn-secondary">등록</label>
                                                    <button type="button" class="col btn btn-xs btn-warning">삭제</button>
                                                </div>
                                            </div>
                                            <script>
                                                document.querySelectorAll('.photo_item').forEach(item => {
                                                    const input = item.querySelector('input[type="file"]');
                                                    const thum = item.querySelector('.thum');
                                                    let hoverThumb = item.querySelector('.thum_hover');
                                                    const label = item.querySelector('label[for]');
                                                    const deleteButton = item.querySelector('button');

                                                    input.addEventListener('change', () => {
                                                        const file = input.files[0];
                                                        if (file) {
                                                            const validImageTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
                                                            const maxSizeInMB = 2;
                                                            const maxSizeInBytes = maxSizeInMB * 1024 * 1024;

                                                            if (!validImageTypes.includes(file.type)) {
                                                                alert('이미지 파일만 첨부할 수 있습니다.');
                                                                input.value = '';
                                                                return;
                                                            }

                                                            if (file.size > maxSizeInBytes) {
                                                                alert(`이미지 파일은 최대 `+maxSizeInMB+`MB까지 첨부할 수 있습니다.`);
                                                                input.value = '';
                                                                return;
                                                            }

                                                            const reader = new FileReader();
                                                            reader.onload = (e) => {
                                                                const img = new Image();
                                                                img.onload = () => {
                                                                    const width = img.width;
                                                                    const height = img.height;
                                                                    if (width !== 500 || height !== 500) {
                                                                        alert('이미지 크기는 500px x 500px이어야 합니다.');
                                                                        input.value = '';
                                                                        return;
                                                                    }
                                                                    thum.style.backgroundImage = `url(`+e.target.result+`)`;
                                                                };
                                                                img.src = e.target.result;
                                                                const thumHoverDiv = document.createElement('div');
                                                                thumHoverDiv.classList.add('thum_hover');
                                                                const hoverImg = document.createElement('img');
                                                                hoverImg.src = e.target.result;
                                                                hoverImg.alt = '미리보기 이미지';
                                                                thumHoverDiv.appendChild(hoverImg);
                                                                const photoArea = document.querySelector('.photo_area');
                                                                photoArea.insertAdjacentElement('afterend', thumHoverDiv);

                                                                // hoverThumb 업데이트
                                                                hoverThumb = thumHoverDiv;
                                                            };
                                                            reader.readAsDataURL(file);
                                                            label.textContent = '변경';
                                                        }
                                                    });

                                                    deleteButton.addEventListener('click', () => {
                                                        input.value = '';
                                                        thum.style.backgroundImage = 'none';

                                                        if (hoverThumb) {
                                                            hoverThumb.parentNode.removeChild(hoverThumb);
                                                        }
                                                        label.textContent = '등록';
                                                    });
                                                });
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section1"  class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">협력회사 정보</h3></div>
                        <div class="card-body">
                            <div class="row">
                                
                                <div class="form_item">
                                    <div class="subheader mb-1 required">협력회사명</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <div class="search_select">
                                                <input type="hidden" value="">
                                                <button type="button" class="btn_select form-select text-start" onclick="searchSelectOpen(this);">선택</button>
                                                <div class="search_select_options" style="display: none;">
                                                    <input type="text" class="form-control" placeholder="검색어 입력" oninput="searchSelectSearch(this);">
                                                    <div class="items">
                                                        <div class="item"><a href="javascript:;" data-id="" class="active" onclick="searchSelectSelect(this);resetUnderSelect(this);">선택</a></div>
                                                        <div class="item"><a href="javascript:;" data-id="code458i95i5" onclick="searchSelectSelect(this);resetUnderSelect(this);">협력회사1</a></div>
                                                        <div class="item"><a href="javascript:;" data-id="codeeye44576" onclick="searchSelectSelect(this);resetUnderSelect(this);">협력회사1</a></div>
                                                        <div class="item"><a href="javascript:;" data-id="code45urt48u" onclick="searchSelectSelect(this);resetUnderSelect(this);">협력회사2</a></div>
                                                        <div class="item"><a href="javascript:;" data-id="code4567uer" onclick="searchSelectSelect(this);resetUnderSelect(this);">협력회사3</a></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">사업자 등록번호</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">담당자명</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">대표 전화번호</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">담당자 전화번호</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">담당자 휴대폰번호</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section2" class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">카테고리/정보고시</h3></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form_item size_xl">
                                    <div class="subheader mb-2 required">상품 카테고리 분류</div>
                                    <div class="subcontent">
                                        <div class="row">
                                            <div class="col" id="cate1">
                                                <div class="badge d-block fs-4 bg-dark-lt rounded-0">1차 카테고리</div>
                                                <div class="cate_list">
                                                    <div class="item"><a href="javascript:;" data-id="10" data-name="가전/IT">[10]가전/IT</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="20" data-name="답례품">[20]답례품</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="30" data-name="생활/주방/가구">[30]생활/주방/가구</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="40" data-name="의류">[40]의류</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="50" data-name="잡화">[50]잡화</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="60" data-name="식품">[60]식품</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="70" data-name="상품권">[70]상품권</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="80" data-name="식음료">[80]식음료</a></div>
                                                </div>
                                            </div>
                                            <div class="col" id="cate2">
                                                <div class="badge d-block fs-4 bg-dark-lt rounded-0">2차 카테고리</div>
                                                <div class="cate_list">
                                                    <div class="item"><a href="javascript:;" data-id="1010" data-name="aaa">[1010]aaa</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1020" data-name="bbbb">[1020]bbbb</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1030" data-name="ccc">[1030]ccc</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1040" data-name="ddd">[1040]ddd</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1050" data-name="fff">[1050]fff</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1060" data-name="eee">[1060]eee</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1070" data-name="ggg">[1070]ggg</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="1080" data-name="qwe">[1080]qwe</a></div>
                                                </div>
                                            </div>
                                            <div class="col" id="cate3">
                                                <div class="badge d-block fs-4 bg-dark-lt rounded-0">3차 카테고리</div>
                                                <div class="cate_list">
                                                    <div class="item"><a href="javascript:;" data-id="102010" data-name="qqwe">[102010]qqwe</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102020" data-name="rewtert">[102020]rewtert</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102030" data-name="gwgwg">[102030]gwgwg</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102040" data-name="ewrwe">[102040]ewrwe</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102050" data-name="qweqwe">[102050]qweqwe</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102060" data-name="thbrthbrt">[102060]thbrthbrt</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102070" data-name="jhr">[102070]jhr</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="102080" data-name="werwer">[102080]werwer</a></div>
                                                </div>
                                            </div>
                                            <div class="col mt-auto"><button type="button" id="cateAdd" class="btn btn-secondary">추가</button></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl">
                                    <div class="subheader mb-2">선택된 카테고리 분류</div>
                                    <div class="subcontent">
                                        <input type="hidden" id="selectedCatesCode"><!-- 선택된 카테고리코드가 배열로 담김 -->
                                        <div id="selectedCates" class="selected_cates main_cate">
                                            <div class="item">
                                                [10]가전/it > [1010]aaa > [102010]qqwe <button type="button" class="btn btn-xs btn-secondary" onclick="removeCategory(0)">삭제</button>
                                            </div>
                                            <div class="item">
                                                [20]답례품 > [1020]bbbb > [102020]rewtert <button type="button" class="btn btn-xs btn-secondary" onclick="removeCategory(1)">삭제</button>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                        const selectedCategories = [
                                            {
                                                "cate1": "10",
                                                "cate1name": "가전/IT",
                                                "cate2": "1010",
                                                "cate2name": "aaa",
                                                "cate3": "102010",
                                                "cate3name": "qqwe"
                                            },
                                            {
                                                "cate1": "20",
                                                "cate1name": "답례품",
                                                "cate2": "1020",
                                                "cate2name": "bbbb",
                                                "cate3": "102020",
                                                "cate3name": "rewtert"
                                            },
                                        ];
                                        renderSelectedCategories();
                                    
                                        function updateSelectedCategoriesInput() {
                                            document.getElementById('selectedCatesCode').value = JSON.stringify(selectedCategories);
                                            console.log('선택된 카테고리:', document.getElementById('selectedCatesCode').value);
                                        }

                                        function addCategory() {
                                            const selected1 = document.querySelector('#cate1 .cate_list .item a.active');
                                            const selected2 = document.querySelector('#cate2 .cate_list .item a.active');
                                            const selected3 = document.querySelector('#cate3 .cate_list .item a.active');

                                            if (!selected1 || !selected2 || !selected3) {
                                                alert('1, 2, 3차 카테고리를 모두 선택하세요.');
                                                return;
                                            }

                                            const category = {
                                                cate1: selected1.dataset.id,
                                                cate1name: selected1.dataset.name,
                                                cate2: selected2.dataset.id,
                                                cate2name: selected2.dataset.name,
                                                cate3: selected3.dataset.id,
                                                cate3name: selected3.dataset.name
                                            };

                                            // 중복 체크
                                            if (selectedCategories.some(cat => 
                                                cat.cate1 === category.cate1 && 
                                                cat.cate2 === category.cate2 && 
                                                cat.cate3 === category.cate3
                                            )) {
                                                alert('이미 선택한 카테고리입니다.');
                                                return;
                                            }

                                            selectedCategories.push(category);
                                            updateSelectedCategoriesInput();
                                            renderSelectedCategories();
                                        }

                                        function removeCategory(index) {
                                            selectedCategories.splice(index, 1);
                                            updateSelectedCategoriesInput();
                                            renderSelectedCategories();
                                        }

                                        function renderSelectedCategories() {
                                            const container = document.getElementById('selectedCates');
                                            container.innerHTML = '';
                                            
                                            if(selectedCategories.length === 0){
                                                const div = document.createElement('div');
                                                div.className = 'empty-sm';
                                                div.innerHTML = `등록된 카테고리 없음`;
                                                container.appendChild(div);
                                            } else {
                                                selectedCategories.forEach((category, index) => {
                                                    const div = document.createElement('div');
                                                    div.className = 'item';
                                                    div.innerHTML = `[`+category.cate1+`]`+category.cate1name+` > [`+category.cate2+`]`+category.cate2name+` > [`+category.cate3+`]`+category.cate3name+` <button type="button" class="btn btn-xs btn-secondary" onclick="removeCategory(`+index+`)">삭제</button>`;
                                                    container.appendChild(div);
                                                });
                                            }
                                        }

                                        document.querySelectorAll('.cate_list').forEach(list => {
                                            list.addEventListener('click', function (event) {
                                                if (event.target.tagName === 'A') {
                                                    const siblings = event.target.parentElement.parentElement.querySelectorAll('a');
                                                    siblings.forEach(sib => sib.classList.remove('active'));
                                                    event.target.classList.add('active');
                                                }
                                            });
                                        });

                                        document.getElementById('cateAdd').addEventListener('click', addCategory);
                                    </script>
                                </div>
                                <div class="form_item size_xl yellow">
                                    <div class="subheader mb-2 required">정보고시 카테고리 분류</div>
                                    <div class="subcontent">
                                        <div class="row">
                                            <div class="col" id="cateGosi1">
                                                <div class="badge d-block fs-4 bg-dark-lt rounded-0">카테고리</div>
                                                <div class="cate_list">
                                                    <div class="item"><a href="javascript:;" data-id="10">[10]가전/IT</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="20">[20]답례품</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="30">[30]생활/주방/가구</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="40">[40]의류</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="50">[50]잡화</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="60">[60]식품</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="70">[70]상품권</a></div>
                                                    <div class="item"><a href="javascript:;" data-id="80">[80]식음료</a></div>
                                                </div>
                                            </div>
                                            <div class="col mt-auto"><button type="button" id="cateAddGosi" class="btn btn-secondary">추가</button></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl yellow">
                                    <div class="subheader mb-2">선택된 카테고리 분류</div>
                                    <div class="subcontent">
                                        <input type="hidden" id="selectedCatesCodeGosi">
                                        <div id="selectedCatesGosi" class="selected_cates">
                                            <div class="item">
                                                [10]가전/it <button type="button" class="btn btn-xs btn-secondary" onclick="removeGosiCategory(0)">삭제</button>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                        //let selectedGosiCategory = { id: "10", text: "[10]가전/IT" }; // 예시 데이터
                                        let selectedGosiCategory = null
                                    
                                        // 페이지 로드 시 초기 선택된 정보고시 카테고리 데이터로 초기화
                                        renderSelectedGosiCategory();
                                    
                                        function updateSelectedGosiCategoryInput() {
                                            const selectedCatesCodeGosi = selectedGosiCategory ? JSON.stringify(selectedGosiCategory.id) : '';
                                            document.getElementById('selectedCatesCodeGosi').value = selectedCatesCodeGosi;
                                            console.log('선택된 고시카테고리:', selectedCatesCodeGosi);
                                        }
                                    
                                        function addGosiCategory() {
                                            const selectedGosi1 = document.querySelector('#cateGosi1 .cate_list .item a.active');
                                    
                                            if (!selectedGosi1) {
                                                alert('정보고시 카테고리를 선택하세요.');
                                                return;
                                            }
                                    
                                            selectedGosiCategory = {
                                                id: selectedGosi1.dataset.id,
                                                text: selectedGosi1.innerText
                                            };
                                    
                                            updateSelectedGosiCategoryInput();
                                            renderSelectedGosiCategory();
                                        }
                                    
                                        function removeGosiCategory() {
                                            selectedGosiCategory = null;
                                            updateSelectedGosiCategoryInput();
                                            renderSelectedGosiCategory();
                                        }
                                    
                                        function renderSelectedGosiCategory() {
                                            const container = document.getElementById('selectedCatesGosi');
                                            container.innerHTML = '';
                                            if (!selectedGosiCategory) {
                                                const div = document.createElement('div');
                                                div.className = 'empty-sm';
                                                div.innerHTML = '등록된 카테고리 없음';
                                                container.appendChild(div);
                                            } else {
                                                const div = document.createElement('div');
                                                div.className = 'item';
                                                div.innerHTML = ``+selectedGosiCategory.text+` <button type="button" class="btn btn-xs btn-secondary" onclick="removeGosiCategory()">삭제</button>`;
                                                container.appendChild(div);
                                            }
                                        }
                                    
                                        document.querySelectorAll('#cateGosi1 .cate_list .item a').forEach(list => {
                                            list.addEventListener('click', function(event) {
                                                if (event.target.tagName === 'A') {
                                                    const siblings = event.target.parentElement.parentElement.querySelectorAll('a');
                                                    siblings.forEach(sib => sib.classList.remove('active'));
                                                    event.target.classList.add('active');
                                                }
                                            });
                                        });
                                    
                                        document.getElementById('cateAddGosi').addEventListener('click', addGosiCategory);
                                    </script>
                                </div>
                                <div class="form_item yellow">
                                    <div class="subheader mb-1 required">제품소재</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                        <small class="form-hint">ex) 면100%</small>
                                    </div>
                                </div>
                                <div class="form_item yellow">
                                    <div class="subheader mb-1 required">색상</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                        <small class="form-hint">ex) 핑크</small>
                                    </div>
                                </div>
                                <div class="form_item yellow">
                                    <div class="subheader mb-1 required">품명</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                        <small class="form-hint">ex) 야구장갑 나이키 AK122</small>
                                    </div>
                                </div>
                                <div class="form_item yellow">
                                    <div class="subheader mb-1 required">품명</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                            <button class="btn bg-secondary text-light btn-sm" type="button">안전인증정보 조회</button>
                                        </div>
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                            <button class="btn bg-secondary text-light btn-sm" type="button">적합성평가현황 조회</button>
                                        </div>
                                        <div class="mt-1">
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox">
                                                <span class="form-check-label">사용안함(필수값이 아닌 상품의 경우 체크해주세요)</span>
                                            </label>
                                        </div>
                                        <small class="form-hint">ex) 01B36k175-7006A</small>
                                    </div>
                                </div>
                                <div class="form_item size_lg yellow">
                                    <div class="subheader mb-1 required">상품구성</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item yellow">
                                    <div class="subheader mb-1 required">상품규격</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="20cm" >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section3" class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">상품정보</h3></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form_item size_lg">
                                    <div class="subheader mb-2">상품코드</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" placeholder="상품코드는 자동으로 등록됩니다." readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_lg">
                                    <div class="subheader mb-2">외부몰상품코드</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl">
                                    <div class="subheader mb-1 required">상품명</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                        <small class="form-hint">ex) [브랜드] 상품명</small>
                                    </div>
                                </div>
                                <div class="form_item gray">
                                    <div class="subheader mb-1 required">상품구성</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item gray">
                                    <div class="subheader mb-1 required">상품규격</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item gray">
                                    <div class="subheader mb-1 required">재질/원료</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1 required">제조사</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1 required">원산지</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1 required">과세구분</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type" checked="">
                                                <span class="form-check-label">과세</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type">
                                                <span class="form-check-label">면세</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type">
                                                <span class="form-check-label">유가증권</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1 required">모델명</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                            <button class="btn bg-secondary text-light btn-sm" type="button">중복체크</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">브랜드</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_lg">
                                    <div class="subheader mb-1">주문수량 제한</div>
                                    <div class="subcontent">
                                        <table class="table table-vcenter table-line card-table table-mb">
                                            <colgroup>
                                                <col style="width:150px;">
                                                <col>
                                            </colgroup>
                                            <tbody>
                                                <tr>
                                                    <th>최소 주문수량</th>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="tel" name="" class="form-control text-end" value="" >
                                                            <span class="input-group-text text">개</span>
                                                            <label class="form-check form-check-inline ms-3">
                                                                <input class="form-check-input" type="checkbox">
                                                                <span class="form-check-label">묶음으로 구매</span>
                                                            </label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>최대 주문수량</th>
                                                    <td>
                                                        <div class="input-group">
                                                            <label class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" id="limitLotNo" name="limit_lot" checked>
                                                                <span class="form-check-label">제한없음</span>
                                                            </label>
                                                        </div>
                                                        <div class="input-group">
                                                            <label class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" id="limitLotYes" name="limit_lot">
                                                                <span class="form-check-label">제한있음</span>
                                                            </label>
                                                            <input type="tel" class="form-control" id="limitLotInput" readonly>
                                                            <span class="input-group-text text">개 이하로 제한함</span>
                                                        </div>
                                                        <script>
                                                            //최대 주문수량 각 항목 체크 시
                                                            const limitLot = document.querySelectorAll('input[name="limit_lot"]');
                                                            const limitLotNo = document.getElementById('limitLotNo');
                                                            const limitLotYes = document.getElementById('limitLotYes');
                                                            const limitLotInput = document.getElementById('limitLotInput');
                                                            function lotLimitCheck(){
                                                                if (limitLotYes.checked) {
                                                                    limitLotInput.removeAttribute('readonly');
                                                                    limitLotInput.value = '';
                                                                }else if(!limitLotYes.checked) {
                                                                    limitLotInput.setAttribute('readonly', true);
                                                                    limitLotInput.value = '';
                                                                }
                                                            }
                                                            limitLot.forEach(function (item) {
                                                                item.addEventListener('change', function() {
                                                                    lotLimitCheck()
                                                                });
                                                            });
                                                            lotLimitCheck()
                                                        </script>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <small class="form_hint">
                                            1. 묶음으로 구매 체크를 안했을때 기본 1씩 증가 - ex) 최소 수량 2일때 1개씩 증가 2, 3, 4, 5 ...<br/>
                                            2. 묶음으로 구매 체크 시 상품구매시 최소단위수량으로 증가 처리 - ex) 최소 수량 2일때 2개씩 증가 2, 4, 6, 8 ...
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form_item">
                                    <div class="subheader mb-1">배송형식</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="delivery_type" checked="">
                                                <span class="form-check-label">개별배송</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="delivery_type">
                                                <span class="form-check-label">일괄배송</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">발주 후 배송기간</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="text" name="" class="form-control" value="발주 후 3일이내" >
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">여러곳 배송하기</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="multi_delivery" checked="">
                                                <span class="form-check-label">사용안함</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="multi_delivery">
                                                <span class="form-check-label">사용함</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-1">포인트 사용</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="point_use">
                                                <span class="form-check-label">모두사용</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="point_use">
                                                <span class="form-check-label">포인트만 사용</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="point_use">
                                                <span class="form-check-label">포인트사용불가</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl">
                                    <div class="subheader mb-1">검색키워드</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input 
                                                class="form-control max-text" 
                                                maxlength="200" 
                                                type="text" 
                                                name=""
                                                value="" 
                                            >
                                            <span class="input-group-text text max-len"><b>0</b> / 200</span>
                                        </div>
                                        <small class="form-hint">상품 검색 시 상품명이 아닌 검색 키워드에서 검색됩니다. 키워드는 
                                            <span class="text-danger">200</span>자까지 등록 가능합니다.</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section4" class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">가격정보</h3></div>
                        <div class="card-body">
                            <!-- 매장 협력회사 상품등록 시 -->
                            <div class="row">
                                <div class="form_item">
                                    <div class="subheader mb-2 required">공급가(부가세포함)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end priceSupply" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">제안할인율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="" readonly>
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2">인터넷 최저가</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">판가율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="" readonly>
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2 required">소비자가(부가세포함)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">판매할인율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="" readonly>
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2">판매가</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end priceSelling" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2 required">에누리</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">에누리율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="">
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- //매장 협력회사 상품등록 시 -->
                            <!-- 기획 협력회사 상품등록 시 -->
                            <div class="row">
                                <div class="form_item">
                                    <div class="subheader mb-2 required">공급가(부가세포함)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end priceSupply" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">공급할인율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="" disabled>
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2">인터넷 최저가</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">판가율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="" disabled>
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2 required">소비자가(부가세포함)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">판매할인율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="" disabled>
                                            <span class="input-group-text text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item">
                                    <div class="subheader mb-2">판매가</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end priceSelling" value="" data-amount-comma="">
                                            <span class="input-group-text text">원</span>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text text">마진율</span>
                                            <input type="tel" name="" class="form-control text-end" value="0" data-amount-comma="">
                                            <span class="input-group-text text">%</span>
                                            <button class="btn bg-secondary text-light btn-sm" type="button">기본마진율 적용</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- //기획 협력회사 상품등록 시 -->
                            <div class="row">
                                <div class="form_item size_xl">
                                    <div class="subheader mb-2">배송비</div>
                                    <div class="subcontent">
                                        <div class="table-responsive">
                                            <table class="table table-vcenter table-line card-table text-center table-mb">
                                                <thead class="dark">
                                                    <tr>
                                                        <th colspan="2">선택</th>
                                                        <th>조건</th>
                                                        <th>배송비</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <input class="form-check-input" type="radio" name="delivery_price" checked>
                                                        </td>
                                                        <td class="text-start">무료(디폴트 무료배송원칙)</td>
                                                        <td>판매자 부담</td>
                                                        <td>
                                                            해당없음
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input class="form-check-input" type="radio" name="delivery_price">
                                                        </td>
                                                        <td class="text-start">기본배송비(업체정보에 등록된 무료조건 이하 시 사용)</td>
                                                        <td>구매자 부담</td>
                                                        <td>
                                                            <div class="input-group m-0">
                                                                <input type="tel" name="" class="form-control text-end" value="2500" data-amount-comma="" readonly>
                                                                <span class="input-group-text text">원</span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input class="form-check-input" id="deliveryPriceOther" type="radio" name="delivery_price">
                                                        </td>
                                                        <td class="text-start">상품별 별도 배송비(기본배송비와 상이한 배송비 부과 시 사용, 상품무료조건 예외)</td>
                                                        <td>구매자 부담</td>
                                                        <td>
                                                            <div class="input-group m-0">
                                                                <input type="tel" name="" id="deliveryPriceOtherInput" class="form-control text-end" value="" data-amount-comma="">
                                                                <span class="input-group-text text">원</span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <script>
                                                //최대 주문수량 각 항목 체크 시
                                                const deliveryPrice = document.querySelectorAll('input[name="delivery_price"]');
                                                const deliveryPriceOther = document.getElementById('deliveryPriceOther');
                                                const deliveryPriceOtherInput = document.getElementById('deliveryPriceOtherInput');
                                                function deliveryPriceCheck(){
                                                    if (deliveryPriceOther.checked) {
                                                        deliveryPriceOtherInput.removeAttribute('readonly');
                                                        deliveryPriceOtherInput.value = '';
                                                    }else if(!deliveryPriceOther.checked) {
                                                        deliveryPriceOtherInput.setAttribute('readonly', true);
                                                        deliveryPriceOtherInput.value = '';
                                                    }
                                                }
                                                deliveryPrice.forEach(function (item) {
                                                    item.addEventListener('change', function() {
                                                        deliveryPriceCheck()
                                                    });
                                                });
                                                deliveryPriceCheck()
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section5" class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">재고관리옵션</h3></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form_item size_lg">
                                    <div class="subheader mb-2">재고상태</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_status"/>
                                                <span class="form-check-label">판매중</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_status" checked />
                                                <span class="form-check-label">일시품절</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_status"/>
                                                <span class="form-check-label">판매종료</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_lg">
                                    <div class="subheader mb-2">재고관리옵션</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_option" radio-display="" checked="">
                                                <span class="form-check-label">상시판매</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_option" radio-display="stock_option_lot">
                                                <span class="form-check-label">수량품</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_option" radio-display="stock_option_integrated">
                                                <span class="form-check-label">옵션일체형</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_option" radio-display="stock_option_modular">
                                                <span class="form-check-label">옵션분리형</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="stock_option" radio-display="stock_option_standalone">
                                                <span class="form-check-label">옵션독립형</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- 수량품 -->
                                <div class="form_item stock_option_lot">
                                    <div class="subheader mb-1">수량품 - 상품수량(현재수량)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <input type="tel" name="" class="form-control text-end" value="100" readonly>
                                            <span class="input-group-text text">개</span>
                                            <button class="btn bg-secondary text-light btn-sm" type="button" 
                                                onclick="windowPopup('/resources/static/html/popup/set_stock.html', '600', '650')"
                                            >
                                                재고관리
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!-- //수량품 -->
                                <!-- 옵션일체형 -->
                                <div class="form_item size_xl stock_option_integrated">
                                    <div class="subheader mb-2 required">옵션일체형 - 옵션구성</div>
                                    <div class="subcontent">
                                        <div class="list-btns justify-content-between">
                                            <div>
                                            </div>
                                            <div>
                                                <small class="fom-hint">*옵션내용은 <span class="text-danger">,를 사용하여 구분</span>해주세요.</small>
                                            </div>
                                        </div>
                                        <div class="table-responsive mt-2">
                                            <table class="table table-vcenter table-line card-table text-center table-mb">
                                                <colgroup>
                                                    <col style="width:90px;">
                                                    <col>
                                                    <col>
                                                    <col style="width:120px;">
                                                </colgroup>
                                                <thead class="dark">
                                                    <tr>
                                                        <th>순서</th>
                                                        <th>옵션명</th>
                                                        <th>옵션내용</th>
                                                        <th>삭제/추가</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="optionsTbodyIntegrated">
                                                    <tr>
                                                        <td>
                                                            <input type="hidden" value="1">
                                                            <button onclick="indexUp(this , 'Integrated')" type="button" class="btn btn-xs btn-secondary" style="display:none;">▲</button>
                                                            <button onclick="indexDown(this,'Integrated')" type="button" class="btn btn-xs btn-secondary" style="display:none;">▼</button>
                                                        </td>
                                                        <td><input type="text" class="form-control option-name" placeholder="ex) 색상"></td>
                                                        <td><input type="text" class="form-control option-values" placeholder="*옵션내용은 ,를 사용하여 구분해주세요. ex) 화이트,블랙,그레이"></td>
                                                        
                                                        <td>
                                                            <button onclick="removeOption(this ,'Integrated')" type="button" class="btn btn-xs btn-warning">삭제</button>
                                                            <button onclick="addOption('next', this , 'Integrated')" type="button" class="btn btn-xs btn-primary">추가</button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="list-btns justify-content-between">
                                            <div>
                                                <small class="badge bg-red-lt fs-5">※ 옵션명과 옵션내용은 작성 후 옵션 항목반영 버튼으로 클릭하셔야 이하 옵션별 재고/가격에 해당 내용이 반영됩니다</small>
                                            </div>
                                            <div>
                                                <button onclick="clearOptions('Integrated')"  type="button" class="btn btn-sm ms-1 btn-secondary">초기화</button>
                                                <button onclick="applyOptions('Integrated')" type="button" class="btn btn-sm ms-1 btn-primary">옵션 항목 반영</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl stock_option_integrated">
                                    <div class="subheader mb-2 required">옵션일체형 - 옵션별 재고/가격</div>
                                    <div class="subcontent">
                                        <div class="list-btns justify-content-between">
                                            <div>
                                                <button onclick="deleteSelectedOptions('Integrated')" type="button" class="btn btn-sm btn-danger">삭제</button>
                                                <button 
                                                    type="button" 
                                                    class="btn btn-sm btn-secondary"
                                                    onclick="windowPopup('/resources/static/html/popup/goods_option_change_all.html', '500', '650')"
                                                >
                                                    일괄변경
                                                </button>
                                            </div>
                                            <div>
                                                <small class="form-hint">※ 공급가, 마진율, 판매가, 재고수량은 상품 가격정보에 입력한  금액이 자동 등록됩니다.</small>
                                            </div>
                                        </div>
                                        <div class="table-responsive mt-2">
                                            <table class="table table-vcenter table-line card-table text-center table-mb label-control">
                                                <thead class="dark">
                                                    <tr>
                                                        <th><input type="checkbox" class="form-check-input check-all"></th>
                                                        <th>번호</th>
                                                        <th>품목명</th>
                                                        <th>공급가</th>
                                                        <th>마진율</th>
                                                        <th>판매가</th>
                                                        <th>재고수량</th>
                                                        <th>재고노출</th>
                                                        <th>진열상태</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="selectedOptionsTbodyIntegrated">
                                                    <tr>
                                                        <td colspan="9" class="list_empty">등록된 옵션 품목이 없습니다.</td>
                                                    </tr>
                                                    <!-- <tr>
                                                        <td><input type="checkbox"></td>
                                                        <td>1</td>
                                                        <td class="text-start">블랙/스몰</td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td>
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-text text">%</span>
                                                                <button class="btn bg-secondary text-light btn-sm" type="button">기본마진율 적용</button>
                                                            </div>
                                                        </td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td>
                                                            <select name="" id="" class="form-select">
                                                                <option value="" selected>진열함</option>
                                                                <option value="">비진열함</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- //옵션일체형 -->
                                <!-- //옵션분리형-->
                                <div class="form_item size_xl stock_option_modular">
                                    <div class="subheader mb-2 required">옵션분리형 - 옵션구성</div>
                                    <div class="subcontent">
                                        <div class="list-btns justify-content-between">
                                            <div>
                                            </div>
                                            <div>
                                                <small class="fom-hint">*옵션내용은 <span class="text-danger">,를 사용하여 구분</span>해주세요.</small>
                                            </div>
                                        </div>
                                        <div class="table-responsive mt-2">
                                            <table class="table table-vcenter table-line card-table text-center table-mb">
                                                <colgroup>
                                                    <col style="width:90px;">
                                                    <col>
                                                    <col>
                                                    <col style="width:120px;">
                                                </colgroup>
                                                <thead class="dark">
                                                    <tr>
                                                        <th>순서</th>
                                                        <th>옵션명</th>
                                                        <th>옵션내용</th>
                                                        <th>삭제/추가</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="optionsTbodyModular">
                                                    <tr>
                                                        <td>
                                                            <input type="hidden" value="1">
                                                            <button onclick="indexUp(this , 'Modular')" type="button" class="btn btn-xs btn-secondary" style="display:none;">▲</button>
                                                            <button onclick="indexDown(this,'Modular')" type="button" class="btn btn-xs btn-secondary" style="display:none;">▼</button>
                                                        </td>
                                                        <td><input type="text" class="form-control option-name" placeholder="ex) 색상"></td>
                                                        <td><input type="text" class="form-control option-values" placeholder="*옵션내용은 ,를 사용하여 구분해주세요. ex) 화이트,블랙,그레이"></td>
                                                        
                                                        <td>
                                                            <button onclick="removeOption(this ,'Modular')" type="button" class="btn btn-xs btn-warning">삭제</button>
                                                            <button onclick="addOption('next', this , 'Modular')" type="button" class="btn btn-xs btn-primary">추가</button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="list-btns justify-content-between">
                                            <div>
                                                <small class="badge bg-red-lt fs-5">※ 옵션명과 옵션내용은 작성 후 옵션 항목반영 버튼으로 클릭하셔야 이하 옵션별 재고/가격에 해당 내용이 반영됩니다</small>
                                            </div>
                                            <div>
                                                <button onclick="clearOptions('Modular')"  type="button" class="btn btn-sm ms-1 btn-secondary">초기화</button>
                                                <button onclick="applyOptions('Modular')" type="button" class="btn btn-sm ms-1 btn-primary">옵션 항목 반영</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl stock_option_modular">
                                    <div class="subheader mb-2 required">옵션분리형 - 옵션별 재고/가격</div>
                                    <div class="subcontent">
                                        <div class="list-btns justify-content-between">
                                            <div>
                                                <button onclick="deleteSelectedOptions('Modular')" type="button" class="btn btn-sm btn-danger">삭제</button>
                                                <button 
                                                    type="button" 
                                                    class="btn btn-sm btn-secondary"
                                                    onclick="windowPopup('/resources/static/html/popup/goods_option_change_all.html', '500', '650')"
                                                >
                                                    일괄변경
                                                </button>
                                            </div>
                                            <div>
                                                <small class="form-hint">※ 공급가, 마진율, 판매가, 재고수량은 상품 가격정보에 입력한  금액이 자동 등록됩니다.</small>
                                            </div>
                                        </div>
                                        <div class="table-responsive mt-2">
                                            <table class="table table-vcenter table-line card-table text-center table-mb label-control">
                                                <thead class="dark">
                                                    <tr>
                                                        <th><input type="checkbox" class="form-check-input check-all"></th>
                                                        <th>번호</th>
                                                        <th>품목명</th>
                                                        <th>공급가</th>
                                                        <th>마진율</th>
                                                        <th>판매가</th>
                                                        <th>재고수량</th>
                                                        <th>재고노출</th>
                                                        <th>진열상태</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="selectedOptionsTbodyModular">
                                                    <tr>
                                                        <td colspan="9" class="list_empty">등록된 옵션 품목이 없습니다.</td>
                                                    </tr>
                                                    <!-- <tr>
                                                        <td><input type="checkbox"></td>
                                                        <td>1</td>
                                                        <td class="text-start">블랙</td>
                                                        <td class="text-start">스몰</td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td>
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-text text">%</span>
                                                                <button class="btn bg-secondary text-light btn-sm" type="button">기본마진율 적용</button>
                                                            </div>
                                                        </td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td>
                                                            <select name="" id="" class="form-select">
                                                                <option value="" selected>진열함</option>
                                                                <option value="">비진열함</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- //옵션분리형-->
                                <!-- 옵션독립형-->
                                <div class="form_item size_xl stock_option_standalone">
                                    <div class="subheader mb-2 required">옵션독립형 - 옵션구성</div>
                                    <div class="subcontent">
                                        <div class="list-btns justify-content-between">
                                            <div>
                                            </div>
                                            <div>
                                                <small class="fom-hint">*옵션내용은 <span class="text-danger">,를 사용하여 구분</span>해주세요.</small>
                                            </div>
                                        </div>
                                        <div class="table-responsive mt-2">
                                            <table class="table table-vcenter table-line card-table text-center table-mb">
                                                <colgroup>
                                                    <col style="width:90px;">
                                                    <col>
                                                    <col>
                                                    <col style="width:120px;">
                                                </colgroup>
                                                <thead class="dark">
                                                    <tr>
                                                        <th>순서</th>
                                                        <th>옵션명</th>
                                                        <th>옵션내용</th>
                                                        <th>필수</th>
                                                        <th>삭제/추가</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="optionsTbodyStandalone">
                                                    <tr>
                                                        <td>
                                                            <input type="hidden" value="1">
                                                            <button onclick="indexUp(this , 'Standalone')" type="button" class="btn btn-xs btn-secondary" style="display:none;">▲</button>
                                                            <button onclick="indexDown(this,'Standalone')" type="button" class="btn btn-xs btn-secondary" style="display:none;">▼</button>
                                                        </td>
                                                        <td><input type="text" class="form-control option-name" placeholder="ex) 색상"></td>
                                                        <td><input type="text" class="form-control option-values" placeholder="*옵션내용은 ,를 사용하여 구분해주세요. ex) 화이트,블랙,그레이"></td>
                                                        
                                                        <td><input type="checkbox" class="form-check-input option-required"></td>
                                                        
                                                        <td>
                                                            <button onclick="removeOption(this ,'Standalone')" type="button" class="btn btn-xs btn-warning">삭제</button>
                                                            <button onclick="addOption('next', this , 'Standalone')" type="button" class="btn btn-xs btn-primary">추가</button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="list-btns justify-content-between">
                                            <div>
                                                <small class="badge bg-red-lt fs-5">※ 옵션명과 옵션내용은 작성 후 옵션 항목반영 버튼으로 클릭하셔야 이하 옵션별 재고/가격에 해당 내용이 반영됩니다</small>
                                            </div>
                                            <div>
                                                <button onclick="clearOptions('Standalone')"  type="button" class="btn btn-sm ms-1 btn-secondary">초기화</button>
                                                <button onclick="applyOptions('Standalone')" type="button" class="btn btn-sm ms-1 btn-primary">옵션 항목 반영</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form_item size_xl stock_option_standalone">
                                    <div class="subheader mb-2 required">옵션독립형 - 옵션별 재고/가격</div>
                                    <div class="subcontent">
                                        <div class="list-btns justify-content-between">
                                            <div>
                                                <button onclick="deleteSelectedOptions('Standalone')" type="button" class="btn btn-sm btn-danger">삭제</button>
                                                <button 
                                                    type="button" 
                                                    class="btn btn-sm btn-secondary"
                                                    onclick="windowPopup('/resources/static/html/popup/goods_option_change_all.html', '500', '650')"
                                                >
                                                    일괄변경
                                                </button>
                                            </div>
                                            <div>
                                                <small class="form-hint">※ 공급가, 마진율, 판매가, 재고수량은 상품 가격정보에 입력한  금액이 자동 등록됩니다.</small>
                                            </div>
                                        </div>
                                        <div class="table-responsive mt-2">
                                            <table class="table table-vcenter table-line card-table text-center table-mb label-control">
                                                <thead class="dark">
                                                    <tr>
                                                        <th><input type="checkbox" class="form-check-input check-all"></th>
                                                        <th>번호</th>
                                                        <th>품목명</th>
                                                        <th>공급가</th>
                                                        <th>마진율</th>
                                                        <th>판매가</th>
                                                        <th>재고수량</th>
                                                        <th>재고노출</th>
                                                        <th>진열상태</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="selectedOptionsTbodyStandalone">
                                                    <tr>
                                                        <td colspan="9" class="list_empty">등록된 옵션 품목이 없습니다.</td>
                                                    </tr>
                                                    <!-- <tr>
                                                        <td><input type="checkbox" class="form-check-input"></td>
                                                        <td>1</td>
                                                        <td class="text-start">블랙</td>
                                                        <td class="text-start">스몰</td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td>
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-text text">%</span>
                                                                <button class="btn bg-secondary text-light btn-sm" type="button">기본마진율 적용</button>
                                                            </div>
                                                        </td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td><input type="tel" class="form-control text-start" data-amount-comma=""></td>
                                                        <td>
                                                            <select name="" id="" class="form-select">
                                                                <option value="" selected>진열함</option>
                                                                <option value="">비진열함</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- //옵션독립형-->
                            </div>
                        </div>
                    </div>
                </div>

                <div id="section6" class="col-12">
                    <div class="card form_area">
                        <div class="card-header"><h3 class="card-title">상품소개</h3></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form_item size_xl">
                                    <div class="subheader mb-2 required">기본 상품소개</div>
                                    <div class="subcontent">
                                        <small class="form-hint fs-4">
                                            * 상세이미지 등록을 위해서 “이미지호스팅”을 이용하셔야 합니다.<br/>
                                            1. 소스 라고 적힌 버튼을 클릭하시면 HTML 모드를 이용 하실 수 있습니다.<br/>
                                            2. &lt;IMG src="이미지호스팅 파일 주소"&gt; 의 형식으로 이미지를 연결하시면 됩니다.<br/>
                                            ex) &lt;IMG src="https://img507.imageshack.us/img507/8662/67428656.jpg"&gt; <span class="text-primary">https:// 형식을 사용해주시기 바랍니다. https(O), http(X)</span><br/>
                                            3. <span class="text-primary">저희 몰의 Editor 이미지첨부 버튼을 사용하여 업로드 하는 경우에 임의로 HTML 태그를 변경하지 마시기 바랍니다.(Size 태그 삽입은 가능)</span><br/>
                                            <span class="text-danger">태그를 임의로 변경하여 MD관리자가 승인 시 이미지가 보이지 않을 경우 반송처리 될 수도 있습니다.</span><br/>
                                            <span class="text-primary">단 다른 사이트의 이미지 링크시에는 그대로 복사하셔서 사용하셔도 무관합니다.</span>
                                        </small>
                                        <br/>
                                        <textarea class="ckeditor" name="editor1"></textarea>
                                        <small class="form-hint fs-4 mt-1">* 기본 상품소개 이미지 사이즈는 가로 최대 980px 입니다.</small>
                                    </div>
                                </div>
                                <div class="form_item size_xl">
                                    <div class="subheader mb-1 required">제안용 상품소개 (제안서 출력용)</div>
                                    <div class="subcontent">
                                        <div class="input-group">
                                            <textarea class="form-control check-text" name=""></textarea>
                                            <div class="input-group-append">
                                                <span class="input-group-text text check-len"><b>0</b> / 100</span>
                                            </div>
                                        </div>
                                        <small class="form-hint fs-4 mt-1">* 100자 이상 상품소개를 등록해주세요</small>
                                    </div>
                                </div>
                                <div class="form_item size_xl">
                                    <div class="subheader mb-2 required">승인여부</div>
                                    <div class="subcontent">
                                        <div>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type" checked="">
                                                <span class="form-check-label">승인</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type">
                                                <span class="form-check-label">대기</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type">
                                                <span class="form-check-label">반송</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type">
                                                <span class="form-check-label">판매종료</span>
                                            </label>
                                            <label class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="tax_type">
                                                <span class="form-check-label">일시품절</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="list-btns justify-content-between mt-3">
                    <div>
                    </div>
                    <div>
                        <div class="input-group d-inline">
                            <button 
                                type="button" 
                                class="btn btn-outline-primary"
                                onclick="windowPopup('/resources/static/html/popup/temporary_save_pop.html', '500', '550')"
                            >임시저장</button><button 
                                type="button" 
                                class="btn btn-outline-primary"
                                onclick="windowPopup('/resources/static/html/popup/temporary_save_pop.html', '500', '550')"
                            >10</button>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">등록</button>
                        <a href="/resources/static/html/goods/goods_list.html" class="btn btn-secondary">목록</a>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <!-- 공통영역 -->
    <div id="footer"></div>
    <script>
        //헤더&푸터 개발 완료시 삭제해주세요
        var includePath = "/resources/static/layout/footer.html";
        includeFile(includePath, 'footer');
    </script>
    <!-- //공통영역 -->
</div>



<script>
    function createOptionRow(target) {
        let itemRequired = ``;
        if (target === 'Standalone') {
            itemRequired = `
            <td><input type="checkbox" class="form-check-input option-required"></td>
            `;
        } 
        const row = document.createElement('tr');
        
        row.innerHTML = `
            <td>
                <input type="hidden" value="0">
                <button onclick="indexUp(this , '`+target+`')" type="button" class="btn btn-xs btn-secondary">▲</button>
                <button onclick="indexDown(this,'`+target+`')" type="button" class="btn btn-xs btn-secondary">▼</button>
            </td>
            <td><input type="text" class="form-control option-name" placeholder="ex) 색상"></td>
            <td><input type="text" class="form-control option-values" placeholder="*옵션내용은 ,를 사용하여 구분해주세요. ex) 화이트,블랙,그레이"></td>
            `
            +
            itemRequired
            +
            `
            <td>
                <button onclick="removeOption(this ,'`+target+`')" type="button" class="btn btn-xs btn-warning">삭제</button>
                <button onclick="addOption('next', this , '`+target+`')" type="button" class="btn btn-xs btn-primary">추가</button>
            </td>
        `;
        return row;
    }

    function addOption(position, element, target) {
        const tableBody = document.getElementById('optionsTbody' + target);
        const newRow = createOptionRow(target);

        if (position === 'next' && element) {
            const currentRow = element.closest('tr');
            currentRow.parentNode.insertBefore(newRow, currentRow.nextSibling);
        } else {
            if (tableBody.querySelector('.list_empty')) {
                tableBody.innerHTML = '';
            }
            tableBody.appendChild(newRow);
        }

        if(tableBody.querySelectorAll('tr').length > 1){
            //행이 2개이상 남으면 순서 변경 버튼 노출
            tableBody.querySelector('tr td:first-child').querySelectorAll('.btn').forEach(function(btn){
                btn.style.display = "inline-block";
            });
        }

        updateIndex(target);
    }

    function removeOption(element, target) {
        const row = element.closest('tr');
        const tableBody = document.getElementById('optionsTbody' + target);
        if(tableBody.querySelectorAll('tr').length < 2){
            //행이 1개만 남으면 input값 초기화
            row.querySelectorAll('input[type="text"]').forEach(function(input){
                input.value = '';
            });
            row.querySelectorAll('input[type="checkbox"]').forEach(function(checkbox){
                checkbox.checked = false;
            });
            
        }else if(tableBody.querySelectorAll('tr').length == 2){
            row.parentNode.removeChild(row);

            //1만 남으면 순서 변경 버튼 숨김
            tableBody.querySelector('tr td:first-child').querySelectorAll('.btn').forEach(function(btn){
                btn.style.display = "none";
            });
        }else{
            row.parentNode.removeChild(row);
        }

        if (!tableBody.children.length) {
            tableBody.innerHTML = `
                <tr>
                    <td colspan="4" class="list_empty">등록된 옵션이 없습니다.</td>
                </tr>
            `;
        }
        updateIndex(target);
    }

    function indexUp(element, target) {
        const row = element.closest('tr');
        const previousRow = row.previousElementSibling;
        if (previousRow && !previousRow.classList.contains('list_empty')) {
            row.parentNode.insertBefore(row, previousRow);
        }
        updateIndex(target);
    }

    function indexDown(element, target) {
        const row = element.closest('tr');
        const nextRow = row.nextElementSibling;
        if (nextRow) {
            row.parentNode.insertBefore(nextRow, row);
        }
        updateIndex(target);
    }

    function clearOptions(target) {
        const tableBody = document.getElementById('optionsTbody' + target);
        const rows = tableBody.querySelectorAll('tr');
        const resultBody = document.getElementById('selectedOptionsTbody' + target);
        if (rows.length > 0) {
            const firstRowInputs = rows[0].querySelectorAll('input');
            firstRowInputs.forEach(input => {
                input.value = '';
            });
            
            for (let i = 1; i < rows.length; i++) {
                tableBody.removeChild(rows[i]);
            }
        }
        resultBody.innerHTML = '<tr><td colspan="10" class="list_empty">등록된 옵션 품목이 없습니다.</td></tr>'
    }

    function updateIndex(target) {
        const rows = document.querySelectorAll('#optionsTbody' + target + ' tr');
        rows.forEach((row, index) => {
            const hiddenInput = row.querySelector('input[type="hidden"]');
            if (hiddenInput) {
                hiddenInput.value = index + 1;
            }
        });
    }

    function generateCombinations(options, target) {
        const combine = (arr, option) => {
            if (arr.length === 0) {
                return option.values.map(value => [value, option.required]);
            }

            const result = [];
            if (target !== 'Standalone') {
                arr.forEach(item => {
                    option.values.forEach(value => {
                        result.push([...item, value].filter(v => v !== ''));
                    });
                });
            } else {
                options.forEach(item => {
                    item.values.forEach(value => {
                        result.push([value, item.required].filter(v => v !== ''));
                    });
                });
            }
            return result;
        };

        const combinations = options.reduce(combine, []);
        
        const jsonCombinations = combinations.map(combination => {
            const combinationObj = {};
            options.forEach((option, index) => {
                combinationObj[option.name] = combination[index];
            });
            return combinationObj;
        });

        window.optionJsonCombinations = jsonCombinations;
        return combinations;
    }

    function applyOptions(target) {
        const optionsTbody = document.getElementById('optionsTbody' + target);
        const selectedOptionsTbody = document.getElementById('selectedOptionsTbody' + target);
        const optionRows = optionsTbody.querySelectorAll('tr');
        const options = [];
        let priceSupply = document.querySelector('.priceSupply').value.replace(/,/g, '');//제안가 || 공급가
        priceSupply = priceSupply ? parseFloat(priceSupply) : 0;
        let priceSelling = document.querySelector('.priceSelling').value.replace(/,/g, '');//판매가
        priceSelling = priceSelling ? parseFloat(priceSelling) : 0;
        const marginRate = ((priceSelling - priceSupply) / priceSupply) * 100;//마진율

        optionRows.forEach(row => {
            const optionName = row.querySelector('.option-name')?.value.trim();
            const optionValues = row.querySelector('.option-values')?.value.split(',').map(value => value.trim()).filter(value => value !== '') || [];
            const optionRequired = row.querySelector('.option-required');
            let optionRequiredChecked = '';

            if (optionRequired) {
                optionRequiredChecked = optionRequired.checked ? 'checked' : '';
            }

            if (optionName && optionValues.length > 0) {
                options.push({
                    name: optionName,
                    values: optionValues,
                    required: optionRequiredChecked
                });
            }
        });

        if (options.length) {
            selectedOptionsTbody.innerHTML = '';
            const combinations = generateCombinations(options, target);
            const jsonCombinations = window.optionJsonCombinations || [];

            combinations.forEach((combination, index) => {
                const itemRow = document.createElement('tr');
                if (target === 'Standalone' && combination[1] && combination[1] === 'checked') { // 옵션독립형 필수 체크했을 경우
                    itemRow.classList.add('checked');
                }
                let itemOption = ``;
                if (target === 'Integrated') {
                    itemOption = combination.filter(item => item).length > 1 
                        ? combination.join(' / ')
                        : combination.filter(item => item).join('');
                    itemOption = `<td class="text-start">`+itemOption+`</td>`;
                } else if (target === 'Modular') {
                    itemOption = combination.filter(item => item).length > 1 
                        ? combination.join(' | ')
                        : combination.filter(item => item).join('');
                    itemOption = `<td class="text-start">`+itemOption+`</td>`;
                } else if (target === 'Standalone') {
                    itemOption = `<td class="text-start">`+combination[0]+`</td>`;
                }

                const jsonRepresentation = JSON.stringify(jsonCombinations[index] || {}, null, 0)
                    .replace(/"/g, "'")
                    .replace(/\n/g, '')
                    .replace(/\s+/g, ' ');

                itemRow.innerHTML = `
                    <td>
                        <input type="checkbox" class="form-check-input">
                        <input type="text" value="`+ jsonRepresentation +`">
                    </td>
                    <td>`+ Number(index + 1) +`</td>
                    `
                    + 
                    itemOption
                    +
                    `
                    <td><input type="tel" class="form-control text-start" value="`+priceSupply+`" data-amount-comma=""></td>
                    <td>
                        <div class="input-group">
                            <input type="text" class="form-control" value="`+marginRate.toFixed(2) + '%'+`">
                            <span class="input-group-text text">%</span>
                            <button class="btn bg-secondary text-light btn-sm" type="button">기본마진율 적용</button>
                        </div>
                    </td>
                    <td><input type="tel" class="form-control text-start" value="`+priceSelling+`" data-amount-comma=""></td>
                    <td>
                        <div class="input-group">
                            <input type="tel" name="" class="form-control text-end" value="100" readonly="">
                            <span class="input-group-text text">개</span>
                            <button class="btn bg-secondary text-light btn-sm" type="button" onclick="windowPopup('/resources/static/html/popup/set_stock.html', '600', '650')">
                                재고관리
                            </button>
                        </div>
                    </td>
                    <td>
                        <select name="" class="form-select">
                            <option value="" selected>노출함</option>
                            <option value="">노출안함</option>
                        </select>
                    </td>
                    <td>
                        <select name="" class="form-select">
                            <option value="" selected>진열함</option>
                            <option value="">비진열함</option>
                        </select>
                    </td>
                `;

                //매장인경우
                // itemRow.innerHTML = `
                //     <td><input type="checkbox" class="form-check-input"></td>
                //     <td>`+index + 1+`</td>
                //     `
                //     + 
                //     itemOption
                //     +
                //     `
                //     <td><input type="tel" class="form-control text-start" value="`+priceSupply+`" data-amount-comma=""></td>
                //     <td>
                //         <div class="input-group">
                //             <input type="text" class="form-control" value="">
                //             <span class="input-group-text text">%</span>
                //         </div>
                //     </td>
                //     <td><input type="tel" class="form-control text-start" data-amount-comma="" readonly></td>
                //     <td>
                //         <div class="input-group">
                //             <input type="tel" name="" class="form-control text-end" value="0" readonly>
                //             <span class="input-group-text text">개</span>
                //         </div>
                //     </td>
                //     <td>
                //         <select name="" class="form-select">
                //             <option value="" selected>노출함</option>
                //             <option value="">노출안함</option>
                //         </select>
                //     </td>
                //     <td>
                //         <select name="" class="form-select">
                //             <option value="" selected>진열함</option>
                //             <option value="">비진열함</option>
                //         </select>
                //     </td>
                // `;
                selectedOptionsTbody.appendChild(itemRow);
            });
        } else {
            selectedOptionsTbody.innerHTML = `
                <tr>
                    <td colspan="9" class="list_empty">등록된 옵션 품목이 없습니다.</td>
                </tr>
            `;
        }
    }

    function deleteSelectedOptions(target) {
        const selectedOptionsTbody = document.getElementById('selectedOptionsTbody' + target);
        const checkboxes = selectedOptionsTbody.querySelectorAll('input[type="checkbox"]:checked');

        checkboxes.forEach(checkbox => {
            const row = checkbox.closest('tr');
            row.parentNode.removeChild(row);
        });

        updateRowNumbers(selectedOptionsTbody);

        if (!selectedOptionsTbody.children.length) {
            selectedOptionsTbody.innerHTML = `
                <tr>
                    <td colspan="9" class="list_empty">등록된 옵션 품목이 없습니다.</td>
                </tr>
            `;
        }
    }

    function updateRowNumbers(tbody) {
        const rows = tbody.querySelectorAll('tr');
        rows.forEach((row, index) => {
            const numberCell = row.querySelector('td:nth-child(2)');
            numberCell.textContent = index + 1;
        });
    }

    function toggleAllCheckboxes(checkbox) {
        const selectedOptionsTbody = document.getElementById('selectedOptionsTbody');
        const checkboxes = selectedOptionsTbody.querySelectorAll('input[type="checkbox"]');

        checkboxes.forEach(cb => {
            cb.checked = checkbox.checked;
        });
    }
</script>

<script src="/resources/static/dist/js/tabler.min.js"></script>
</body>
</html>